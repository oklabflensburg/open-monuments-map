<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
    <title>Leaflet and GeoJSON</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
     integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
     crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
     integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
     crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
<style>
* {
  margin: 0;
  padding: 0;
}
.leaflet-popup-content {
  margin: 7px 37px 7px 8px;
  line-height: 1.4;
  font-size: 1.3em;
}
tr > td:first-of-type {
  padding-right: 15px;
  font-weight: bold;
}
</style>
  </head>
<body>
  <div id="map" style="width: 100%; height: 100vh;"></div>

<script>
  fetch('./flensburg_denkmalschutz.geojson', {
    method: 'GET'
  })
  .then((response) => {
    return response.json();
  })
  .then((data) => {
    marker(data);
  })
  .catch(function(error) {
    console.log(error);
  });

  const map = L.map('map').setView([54.7836, 9.4321], 13);

  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
  }).addTo(map);

var s_light_style = {
    radius: 8,
    fillColor: "#007cff",
    color: "#000",
    weight: 1,
    opacity: 1,
    fillOpacity: 0.8
};
  var markers = L.markerClusterGroup();

  function marker(data) {

const geojsonGroup = L.geoJSON(data, {
    onEachFeature : function(feature, layer){
        var popupContent =  '<div class="popup"><table class="table table-striped">' +
                            '<tbody><tr><td valign="top">Bezeichnung</td><td>'+ feature.properties.type +'</td></tr>' +
                            '<tr><td valign="top">Denkmaltyp</td><td>'+ feature.properties.designation +'</td></tr>' +
                            '<tr><td valign="top">Fotolink</td><td><a href="' + feature.properties.url +'" target="_blank">' + feature.properties.url +'</a></td></tr>' +
                            '<tr><td valign="top">Beschreibung</td><td>' + feature.properties.description +'</td></tr>' +
                            '<tr><td valign="top">Begr√ºndung</td><td>' + feature.properties.reasons + '</td></tr>' +
                            '<tr><td valign="top">Schutzumfang</td><td>' + feature.properties.scope + '</td></tr>' +
                            '<tr><td valign="top">Adresse</td><td>' + feature.properties.address + '</td></tr></tbody></table>';
        layer.bindPopup(popupContent, {
        maxWidth : 560
        })
    },
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, s_light_style);
    }
});
markers.addLayer(geojsonGroup);
map.addLayer(markers);
}
</script>

</body>
</html>
